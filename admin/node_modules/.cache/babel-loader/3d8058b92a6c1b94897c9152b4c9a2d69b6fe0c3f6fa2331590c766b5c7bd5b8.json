{"ast":null,"code":"import _regeneratorRuntime from\"/home/hp/Documents/Netflix-Clone/Leoflix/admin/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/home/hp/Documents/Netflix-Clone/Leoflix/admin/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/home/hp/Documents/Netflix-Clone/Leoflix/admin/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/hp/Documents/Netflix-Clone/Leoflix/admin/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Sidebar}from\"../../components/sidebar/Sidebar\";import{Navbar}from\"../../components/navbar/Navbar\";import\"./home.scss\";import{Widgets}from\"../../components/widgetLg/Widgets\";import{Featured}from\"../../components/featured/Featured\";import{Chart}from\"../../components/chart/Chart\";import{List}from\"../../components/table/Table\";import axios from\"axios\";import{useMemo}from\"react\";import{useContext,useState,useEffect}from\"react\";import WidgetSm from'../../components/widgetSm/WidgetSm';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var MONTHS=useMemo(function(){return[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];},[]);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),userStats=_useState2[0],setUserStats=_useState2[1];useEffect(function(){var getStats=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,statsList;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"https://leoflix.onrender.com/api/users/stats\",{headers:{token:\"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYyZjYxNTQ3NWMwZDBlNDNjZjlkZmMwOCIsImlzQWRtaW4iOnRydWUsImlhdCI6MTY2OTIzMTYyMywiZXhwIjoyNTMzMjMxNjIzfQ.PBibyNQnxuwtGS85pnVBa1nBdenZbt5og0UB3zqyz5k\"}});case 3:res=_context.sent;statsList=res.data.sort(function(a,b){return a._id-b._id;});statsList.map(function(item){return setUserStats(function(prev){return[].concat(_toConsumableArray(prev),[{name:MONTHS[item._id-1],\"New User\":item.total}]);});});_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}},_callee,null,[[0,8]]);}));return function getStats(){return _ref.apply(this,arguments);};}();getStats();},[MONTHS]);console.log(userStats);return/*#__PURE__*/_jsxs(\"div\",{className:\"home\",children:[/*#__PURE__*/_jsx(Chart,{data:userStats,title:\"User Analytics\",grid:true,dataKey:\"New User\"}),/*#__PURE__*/_jsx(\"div\",{className:\"homeWidgets\",children:/*#__PURE__*/_jsx(WidgetSm,{})})]});};export default Home;","map":{"version":3,"names":["Sidebar","Navbar","Widgets","Featured","Chart","List","axios","useMemo","useContext","useState","useEffect","WidgetSm","Home","MONTHS","userStats","setUserStats","getStats","get","headers","token","res","statsList","data","sort","a","b","_id","map","item","prev","name","total","console","log"],"sources":["/home/hp/Documents/Netflix-Clone/Leoflix/admin/src/pages/home/Home.jsx"],"sourcesContent":["import { Sidebar } from \"../../components/sidebar/Sidebar\";\nimport { Navbar } from \"../../components/navbar/Navbar\";\nimport \"./home.scss\";\nimport { Widgets } from \"../../components/widgetLg/Widgets\";\nimport { Featured } from \"../../components/featured/Featured\";\nimport { Chart } from \"../../components/chart/Chart\";\nimport { List } from \"../../components/table/Table\";\nimport axios from \"axios\";\nimport { useMemo } from \"react\";\nimport { useContext, useState, useEffect } from \"react\";\nimport WidgetSm from '../../components/widgetSm/WidgetSm'\n\nconst Home = () => {\n  const MONTHS = useMemo(\n    () => [\n      \"Jan\",\n      \"Feb\",\n      \"Mar\",\n      \"Apr\",\n      \"May\",\n      \"Jun\",\n      \"Jul\",\n      \"Aug\",\n      \"Sep\",\n      \"Oct\",\n      \"Nov\",\n      \"Dec\",\n    ],\n    []\n  );\n\n  const [userStats, setUserStats] = useState([]);\n\n  useEffect(() => {\n    const getStats = async () => {\n      try {\n        const res = await axios.get(\"https://leoflix.onrender.com/api/users/stats\", {\n          headers: {\n            token:\n              \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYyZjYxNTQ3NWMwZDBlNDNjZjlkZmMwOCIsImlzQWRtaW4iOnRydWUsImlhdCI6MTY2OTIzMTYyMywiZXhwIjoyNTMzMjMxNjIzfQ.PBibyNQnxuwtGS85pnVBa1nBdenZbt5og0UB3zqyz5k\",\n          },\n        });\n        const statsList = res.data.sort(function (a, b) {\n          return a._id - b._id;\n        });\n        statsList.map((item) =>\n          setUserStats((prev) => [\n            ...prev,\n            { name: MONTHS[item._id - 1], \"New User\": item.total },\n          ])\n        );\n      } catch (err) {\n        console.log(err);\n      }\n    };\n    getStats();\n  }, [MONTHS]);\n  console.log(userStats);\n  return (\n    <div className=\"home\">\n          <Chart\n            data={userStats}\n            title=\"User Analytics\"\n            grid\n            dataKey=\"New User\"\n          />\n        <div className=\"homeWidgets\">\n          <WidgetSm />\n        </div>\n    </div>\n  );\n};\n\nexport default Home;\n"],"mappings":"wiBAAA,OAASA,OAAO,KAAQ,kCAAkC,CAC1D,OAASC,MAAM,KAAQ,gCAAgC,CACvD,MAAO,aAAa,CACpB,OAASC,OAAO,KAAQ,mCAAmC,CAC3D,OAASC,QAAQ,KAAQ,oCAAoC,CAC7D,OAASC,KAAK,KAAQ,8BAA8B,CACpD,OAASC,IAAI,KAAQ,8BAA8B,CACnD,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,OAAO,KAAQ,OAAO,CAC/B,OAASC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACvD,MAAOC,SAAQ,KAAM,oCAAoC,yFAEzD,GAAMC,KAAI,CAAG,QAAPA,KAAI,EAAS,CACjB,GAAMC,OAAM,CAAGN,OAAO,CACpB,iBAAM,CACJ,KAAK,CACL,KAAK,CACL,KAAK,CACL,KAAK,CACL,KAAK,CACL,KAAK,CACL,KAAK,CACL,KAAK,CACL,KAAK,CACL,KAAK,CACL,KAAK,CACL,KAAK,CACN,GACD,EAAE,CACH,CAED,cAAkCE,QAAQ,CAAC,EAAE,CAAC,wCAAvCK,SAAS,eAAEC,YAAY,eAE9BL,SAAS,CAAC,UAAM,CACd,GAAMM,SAAQ,4FAAG,4LAEKV,MAAK,CAACW,GAAG,CAAC,8CAA8C,CAAE,CAC1EC,OAAO,CAAE,CACPC,KAAK,CACH,wMACJ,CACF,CAAC,CAAC,QALIC,GAAG,eAMHC,SAAS,CAAGD,GAAG,CAACE,IAAI,CAACC,IAAI,CAAC,SAAUC,CAAC,CAAEC,CAAC,CAAE,CAC9C,MAAOD,EAAC,CAACE,GAAG,CAAGD,CAAC,CAACC,GAAG,CACtB,CAAC,CAAC,CACFL,SAAS,CAACM,GAAG,CAAC,SAACC,IAAI,QACjBb,aAAY,CAAC,SAACc,IAAI,qCACbA,IAAI,GACP,CAAEC,IAAI,CAAEjB,MAAM,CAACe,IAAI,CAACF,GAAG,CAAG,CAAC,CAAC,CAAE,UAAU,CAAEE,IAAI,CAACG,KAAM,CAAC,IACvD,CAAC,GACH,CAAC,+EAEFC,OAAO,CAACC,GAAG,aAAK,CAAC,mEAEpB,kBApBKjB,SAAQ,0CAoBb,CACDA,QAAQ,EAAE,CACZ,CAAC,CAAE,CAACH,MAAM,CAAC,CAAC,CACZmB,OAAO,CAACC,GAAG,CAACnB,SAAS,CAAC,CACtB,mBACE,aAAK,SAAS,CAAC,MAAM,wBACf,KAAC,KAAK,EACJ,IAAI,CAAEA,SAAU,CAChB,KAAK,CAAC,gBAAgB,CACtB,IAAI,MACJ,OAAO,CAAC,UAAU,EAClB,cACJ,YAAK,SAAS,CAAC,aAAa,uBAC1B,KAAC,QAAQ,IAAG,EACR,GACJ,CAEV,CAAC,CAED,cAAeF,KAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}